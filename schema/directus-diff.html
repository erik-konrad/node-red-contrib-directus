<script type="text/javascript">
    RED.nodes.registerType('directus-diff', {
        category: 'Directus',
        color: '#64f',
        defaults: {
            name: { value: '' },
            target: {value: '', type: "directus-config"},
            force: { value: false }
        },
        inputs: 1,
        outputs: 2,
        inputLabels: ['Input'],
        outputLabels: ['Success', 'Error'],
        icon: 'directus.io.svg',
        label() {
            return this.name || 'Directus Schema Diff';
        }
    });
</script>

<script type="text/html" data-template-name="directus-diff">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-target"><i class="fa fa-tag"></i> Directus Target Configuration</label>
        <input type="text" id="node-input-target" placeholder="Directus Target Configuration" />
    </div>
    <div class="form-row">
        <label for="node-input-force" style="width: 70%;">Ignore Version and vendor restrictions</label>
        <input type="checkbox" id="node-input-force" style="display: inline-block; width: auto; vertical-align: top;" />
    </div>
</script>


<script type="text/markdown" data-help-name="directus-diff">
Directus Schema Diff Node

### Inputs
: payload (object) : The current snapshot of the Directus schema, including collections, fields, and relationships. For best results, you can use the output of the Directus Schema Snapshot node.

### Outputs
1. Standard Output
: payload (object) : the diff from the current snapshot to the target snapshot, including added, removed, and changed collections, fields, and relationships.
2. Error Output
: payload (object) : The error details if there was an error while calculating the schema diff.

This node allows you to calculate the difference between the current Directus schema and a target schema, which can be useful for understanding changes in your data structure and for debugging purposes. The output will include details about added, removed, and changed collections, fields, and relationships.

### Configuration
- **Name**: A name for the node (optional).
- **Directus Target Configuration**: Select the Directus target configuration you want to compare against.
- **Ignore Version and vendor restrictions**: If enabled, the diff will ignore version and vendor restrictions, which can be useful if you want to compare schemas from different Directus versions or vendors. However, use this option with caution, as it may lead to unexpected results if there are significant differences between the schemas.
</script>